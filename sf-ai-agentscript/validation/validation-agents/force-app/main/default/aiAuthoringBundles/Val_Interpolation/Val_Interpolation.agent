# Val_Interpolation - Tests variable interpolation in strings
# Purpose: Verify {!@variables.x} injection works as documented
#
# Tests:
#   ✓ Basic variable interpolation {!@variables.x}
#   ✓ Multiple variables in same string
#   ✓ Interpolation with different data types
#   ✓ Conditional interpolation {!expr if cond else alt}
#
# SKILL.md Section: Instruction Syntax Patterns - Interpolation

system:
   messages:
      welcome: "Interpolation validation ready."
      error: "Interpolation error."
   instructions: "This agent tests variable interpolation."

config:
   agent_name: "Val_Interpolation"
   agent_label: "Validation: Interpolation"
   description: "Tests variable injection in strings"
   default_agent_user: "home_furnishing_agent@00dvz000004evdp1379858245.ext"

variables:
   customer_name: mutable string = "Test Customer"
   order_count: mutable number = 5
   is_premium: mutable boolean = True
   status: mutable string = ""

topic test_interpolation:
   description: "Test variable interpolation"
   reasoning:
      instructions: ->
         # Basic string interpolation
         | Hello, {!@variables.customer_name}!

         # Number interpolation
         | You have {!@variables.order_count} orders.

         # Multiple variables in one line
         | Customer: {!@variables.customer_name}, Orders: {!@variables.order_count}

         # Conditional interpolation
         | Status: {!@variables.status if @variables.status else "pending"}

         # Update status and show again
         set @variables.status = "active"
         | Updated status: {!@variables.status if @variables.status else "pending"}
      actions:
         complete: @utils.transition to @topic.done
            description: "Complete interpolation test"

topic done:
   description: "Validation complete"
   reasoning:
      instructions: ->
         | Interpolation validation successful.
         | Final values - Name: {!@variables.customer_name}, Status: {!@variables.status}

start_agent entry:
   description: "Entry point"
   reasoning:
      instructions: |
         Start interpolation validation.
      actions:
         begin: @utils.transition to @topic.test_interpolation
            description: "Begin interpolation tests"
