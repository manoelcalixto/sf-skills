{
  "_description": "Test cases for skill-activation-prompt.py",
  "_version": "1.0.0",

  "keyword_matching_tests": [
    {
      "id": "keyword_apex_single",
      "prompt": "I need to write some apex code",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "min_score": 2,
      "description": "Single keyword 'apex' should match sf-apex"
    },
    {
      "id": "keyword_apex_multiple",
      "prompt": "Create an apex trigger for Account batch processing",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "min_score": 4,
      "description": "Multiple keywords (apex, trigger, batch) should increase score"
    },
    {
      "id": "keyword_flow_single",
      "prompt": "Build a flow for this process",
      "active_files": [],
      "expected_skills": ["sf-flow"],
      "min_score": 2,
      "description": "Single keyword 'flow' should match sf-flow"
    },
    {
      "id": "keyword_word_boundary",
      "prompt": "I need classification logic for categories",
      "active_files": [],
      "expected_skills": [],
      "description": "'classification' should NOT match 'class' keyword (word boundary)"
    },
    {
      "id": "keyword_case_insensitive",
      "prompt": "Create APEX code with TRIGGER",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "min_score": 4,
      "description": "Keywords should match case-insensitively"
    }
  ],

  "intent_pattern_tests": [
    {
      "id": "intent_create_apex",
      "prompt": "Can you create an apex class for me?",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "min_score": 3,
      "description": "Intent pattern 'create.*apex' should match"
    },
    {
      "id": "intent_build_flow",
      "prompt": "Please build an automation for Leads",
      "active_files": [],
      "expected_skills": ["sf-flow"],
      "min_score": 3,
      "description": "Intent pattern 'build.*automation' should match"
    },
    {
      "id": "intent_write_trigger",
      "prompt": "I want to write a trigger",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "min_score": 3,
      "description": "Intent pattern 'write.*trigger' should match"
    },
    {
      "id": "intent_create_component",
      "prompt": "create a lightning web component",
      "active_files": [],
      "expected_skills": ["sf-lwc"],
      "min_score": 3,
      "description": "Intent pattern 'create.*component' should match sf-lwc"
    }
  ],

  "file_pattern_tests": [
    {
      "id": "file_apex_cls",
      "prompt": "Fix this code",
      "active_files": ["AccountService.cls"],
      "expected_skills": ["sf-apex"],
      "min_score": 2,
      "description": ".cls file should suggest sf-apex"
    },
    {
      "id": "file_apex_trigger",
      "prompt": "Review this",
      "active_files": ["AccountTrigger.trigger"],
      "expected_skills": ["sf-apex"],
      "min_score": 2,
      "description": ".trigger file should suggest sf-apex"
    },
    {
      "id": "file_flow",
      "prompt": "Update this automation",
      "active_files": ["Account_Update.flow-meta.xml"],
      "expected_skills": ["sf-flow"],
      "min_score": 2,
      "description": ".flow-meta.xml should suggest sf-flow"
    },
    {
      "id": "file_lwc_js",
      "prompt": "Add a method",
      "active_files": ["force-app/main/default/lwc/myComponent/myComponent.js"],
      "expected_skills": ["sf-lwc"],
      "min_score": 2,
      "description": "LWC .js file should suggest sf-lwc"
    },
    {
      "id": "file_non_sf",
      "prompt": "Fix this",
      "active_files": ["README.md", "package.json"],
      "expected_skills": [],
      "description": "Non-SF files should not trigger any skill"
    }
  ],

  "scoring_tests": [
    {
      "id": "score_low_optional",
      "prompt": "apex",
      "active_files": [],
      "expected_confidence": 1,
      "description": "Score 2 should give OPTIONAL confidence"
    },
    {
      "id": "score_medium_recommended",
      "prompt": "Create apex class with trigger handler",
      "active_files": [],
      "expected_confidence": 2,
      "description": "Score 4-6 should give RECOMMENDED confidence"
    },
    {
      "id": "score_high_required",
      "prompt": "Create an apex trigger with batch processing and test class",
      "active_files": ["AccountService.cls"],
      "expected_confidence": 3,
      "description": "Score >=7 should give REQUIRED confidence"
    }
  ],

  "chain_detection_tests": [
    {
      "id": "chain_full_feature",
      "prompt": "I want to build feature end to end for Account management",
      "active_files": [],
      "expected_chain": "full_feature",
      "description": "Trigger phrase 'build feature' should detect full_feature chain"
    },
    {
      "id": "chain_integration",
      "prompt": "integrate api with Salesforce for external system",
      "active_files": [],
      "expected_chain": "integration",
      "description": "Trigger phrase 'integrate api' should detect integration chain"
    },
    {
      "id": "chain_agentforce",
      "prompt": "Build agentforce agent for customer service",
      "active_files": [],
      "expected_chain": "agentforce",
      "description": "Trigger phrase 'build agent' should detect agentforce chain"
    },
    {
      "id": "chain_none",
      "prompt": "Fix this apex class",
      "active_files": [],
      "expected_chain": null,
      "description": "No chain should be detected for simple prompts"
    }
  ],

  "skill_invocation_tests": [
    {
      "id": "invoke_sf_apex",
      "prompt": "/sf-apex",
      "active_files": [],
      "expected_invocation": "sf-apex",
      "should_save_state": true,
      "description": "/sf-apex should be detected as skill invocation"
    },
    {
      "id": "invoke_sf_flow",
      "prompt": "/sf-flow help me build a flow",
      "active_files": [],
      "expected_invocation": "sf-flow",
      "should_save_state": true,
      "description": "/sf-flow with args should still detect invocation"
    },
    {
      "id": "invoke_unknown",
      "prompt": "/unknown-skill",
      "active_files": [],
      "expected_invocation": null,
      "should_save_state": false,
      "description": "Unknown skill should not be detected as invocation"
    },
    {
      "id": "invoke_not_slash",
      "prompt": "use sf-apex to help me",
      "active_files": [],
      "expected_invocation": null,
      "description": "Mention without slash should not be invocation"
    }
  ],

  "edge_case_tests": [
    {
      "id": "edge_empty_prompt",
      "prompt": "",
      "active_files": [],
      "expected_skills": [],
      "description": "Empty prompt should return no suggestions"
    },
    {
      "id": "edge_short_prompt",
      "prompt": "hi",
      "active_files": [],
      "expected_skills": [],
      "description": "Very short prompt (<5 chars) should return no suggestions"
    },
    {
      "id": "edge_special_chars",
      "prompt": "Create @IsTest apex with $special chars!",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "description": "Special characters should not break matching"
    },
    {
      "id": "edge_multiline",
      "prompt": "I need to:\n1. Create apex\n2. Build flow\n3. Deploy",
      "active_files": [],
      "expected_skills": ["sf-apex", "sf-flow"],
      "description": "Multiline prompts should work"
    },
    {
      "id": "edge_unicode",
      "prompt": "Create apex class for \u201cAccount\u201d handling",
      "active_files": [],
      "expected_skills": ["sf-apex"],
      "description": "Unicode characters should not break matching"
    }
  ],

  "no_match_tests": [
    {
      "id": "no_match_greeting",
      "prompt": "Hello, how are you today?",
      "active_files": [],
      "expected_skills": [],
      "description": "Greetings should not match any skill"
    },
    {
      "id": "no_match_general_coding",
      "prompt": "Help me write a Python script for data processing",
      "active_files": [],
      "expected_skills": [],
      "description": "Non-SF coding requests should not match"
    },
    {
      "id": "no_match_question",
      "prompt": "What is the best way to handle errors?",
      "active_files": [],
      "expected_skills": [],
      "description": "General questions should not match"
    }
  ]
}
